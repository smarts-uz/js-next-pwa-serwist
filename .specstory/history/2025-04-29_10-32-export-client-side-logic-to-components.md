<!-- Generated by SpecStory -->

# Export Client-Side Logic to Components (2025-04-29 15:32:20)

_**User**_

Export the client side logic to components folder in feature/device-orientation/components 

---

_**Assistant**_

I'll help you refactor the code by extracting the client-side logic into separate components. Let me break this down step by step.

First, I'll create the necessary components in the feature/device-orientation/components directory.

1. First, let's create a directory for our components:


---

```bash
mkdir -p app/features/device-orientation/components
```

```
PS R:\Projects\smarts\js-next-pwa-serwist> mkdir -p app/features/device-orientat
ion/components
PS R:\Projects\smarts\js-next-pwa-serwist> mkdir -p app/features/device-orientat
ion/components

























mkdir : An item with the specified name 

```

---

Now I'll create the following components:
1. `OrientationData.tsx` - For the orientation data card
2. `DeviceInfo.tsx` - For the device information card
3. `Documentation.tsx` - For the documentation card
4. `OrientationTracker.tsx` - For the main logic and state management

Let's create these files one by one:

1. First, let's create the OrientationTracker component that will handle the main logic:




---

```diff
- 
+ "use client";
+ import React, { useState, useEffect } from "react";
+ import { Button } from "@/components/ui/button";
+ import { Lock, Unlock } from "lucide-react";
+ import { OrientationData } from "./OrientationData";
+ import { DeviceInfo } from "./DeviceInfo";
+ import { Documentation } from "./Documentation";
+ import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert";
+ import { AlertCircle } from "lucide-react";
+ 
+ interface DeviceOrientationEvent {
+   alpha: number | null;
+   beta: number | null;
+   gamma: number | null;
+   absolute: boolean;
+ }
+ 
+ type PermissionStatus = "granted" | "denied" | "prompt";
+ 
+ export const OrientationTracker = () => {
+   const [isSupported, setIsSupported] = useState(false);
+   const [isActive, setIsActive] = useState(false);
+   const [orientation, setOrientation] = useState<DeviceOrientationEvent>({
+     alpha: null,
+     beta: null,
+     gamma: null,
+     absolute: false,
+   });
+   const [permissionStatus, setPermissionStatus] =
+     useState<PermissionStatus | null>(null);
+ 
+   useEffect(() => {
+     if (typeof DeviceOrientationEvent !== "undefined") {
+       setIsSupported(true);
+     }
+ 
+     if (
+       typeof (DeviceOrientationEvent as any).requestPermission === "function"
+     ) {
+       checkPermission();
+     }
+ 
+     return () => {
+       if (isActive) {
+         window.removeEventListener("deviceorientation", handleOrientation);
+       }
+     };
+   }, [isActive]);
+ 
+   const checkPermission = async () => {
+     try {
+       const status = (await (
+         DeviceOrientationEvent as any
+       ).requestPermission()) as PermissionStatus;
+       setPermissionStatus(status);
+     } catch (error) {
+       console.error("Permission error:", error);
+     }
+   };
+ 
+   const handleOrientation = (event: DeviceOrientationEvent) => {
+     setOrientation({
+       alpha: event.alpha,
+       beta: event.beta,
+       gamma: event.gamma,
+       absolute: event.absolute,
+     });
+   };
+ 
+   const startTracking = () => {
+     window.addEventListener("deviceorientation", handleOrientation);
+     setIsActive(true);
+   };
+ 
+   const stopTracking = () => {
+     window.removeEventListener("deviceorientation", handleOrientation);
+     setIsActive(false);
+   };
+ 
+   return (
+     <>
+       <div className="text-center space-y-2 mb-8">
+         <h1 className="text-2xl sm:text-3xl font-bold">
+           Device Orientation API
+         </h1>
+         <p className="text-sm sm:text-base text-muted-foreground">
+           Access device orientation and motion data
+         </p>
+       </div>
+ 
+       {!isSupported && (
+         <Alert variant="destructive" className="mb-6">
+           <AlertCircle className="h-4 w-4" />
+           <AlertTitle>Not Supported</AlertTitle>
+           <AlertDescription>
+             The Device Orientation API is not supported in your browser or
+             device.
+           </AlertDescription>
+         </Alert>
+       )}
+ 
+       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
+         <OrientationData
+           orientation={orientation}
+           isActive={isActive}
+           isSupported={isSupported}
+           onStartTracking={startTracking}
+           onStopTracking={stopTracking}
+         />
+         <DeviceInfo
+           orientation={orientation}
+           permissionStatus={permissionStatus}
+         />
+       </div>
+ 
+       <Documentation />
+     </>
+   );
+ }; 
```

---

Now let's create the OrientationData component:




---

```diff
- 
+ "use client";
+ import React from "react";
+ import { Button } from "@/components/ui/button";
+ import {
+   Card,
+   CardContent,
+   CardDescription,
+   CardFooter,
+   CardHeader,
+   CardTitle,
+ } from "@/components/ui/card";
+ import { Compass, Smartphone, Gauge, Lock, Unlock } from "lucide-react";
+ import { Progress } from "@/components/ui/progress";
+ 
+ interface DeviceOrientationEvent {
+   alpha: number | null;
+   beta: number | null;
+   gamma: number | null;
+   absolute: boolean;
+ }
+ 
+ interface OrientationDataProps {
+   orientation: DeviceOrientationEvent;
+   isActive: boolean;
+   isSupported: boolean;
+   onStartTracking: () => void;
+   onStopTracking: () => void;
+ }
+ 
+ const formatAngle = (angle: number | null) => {
+   if (angle === null) return "N/A";
+   return `${Math.round(angle)}Â°`;
+ };
+ 
+ export const OrientationData: React.FC<OrientationDataProps> = ({
+   orientation,
+   isActive,
+   isSupported,
+   onStartTracking,
+   onStopTracking,
+ }) => {
+   return (
+     <Card>
+       <CardHeader>
+         <CardTitle>Orientation Data</CardTitle>
+         <CardDescription>Real-time device orientation values</CardDescription>
+       </CardHeader>
+       <CardContent className="space-y-4">
+         <div className="space-y-4">
+           <div className="flex items-center justify-between">
+             <div className="flex items-center space-x-2">
+               <Compass className="h-5 w-5" />
+               <span className="font-medium">Alpha (Z-axis)</span>
+             </div>
+             <span className="font-mono">{formatAngle(orientation.alpha)}</span>
+           </div>
+           <Progress
+             value={orientation.alpha ? ((orientation.alpha + 180) / 360) * 100 : 0}
+             className="h-2"
+           />
+ 
+           <div className="flex items-center justify-between">
+             <div className="flex items-center space-x-2">
+               <Smartphone className="h-5 w-5" />
+               <span className="font-medium">Beta (X-axis)</span>
+             </div>
+             <span className="font-mono">{formatAngle(orientation.beta)}</span>
+           </div>
+           <Progress
+             value={orientation.beta ? ((orientation.beta + 90) / 180) * 100 : 0}
+             className="h-2"
+           />
+ 
+           <div className="flex items-center justify-between">
+             <div className="flex items-center space-x-2">
+               <Gauge className="h-5 w-5" />
+               <span className="font-medium">Gamma (Y-axis)</span>
+             </div>
+             <span className="font-mono">{formatAngle(orientation.gamma)}</span>
+           </div>
+           <Progress
+             value={orientation.gamma ? ((orientation.gamma + 90) / 180) * 100 : 0}
+             className="h-2"
+           />
+         </div>
+       </CardContent>
+       <CardFooter className="flex justify-between">
+         <Button
+           onClick={isActive ? onStopTracking : onStartTracking}
+           disabled={!isSupported}
+           className="w-full"
+         >
+           {isActive ? (
+             <>
+               <Lock className="mr-2 h-4 w-4" />
+               Stop Tracking
+             </>
+           ) : (
+             <>
+               <Unlock className="mr-2 h-4 w-4" />
+               Start Tracking
+             </>
+           )}
+         </Button>
+       </CardFooter>
+     </Card>
+   );
+ }; 
```

---

Now let's create the DeviceInfo component:






---

```diff
- 
+ "use client";
+ import React from "react";
+ import {
+   Card,
+   CardContent,
+   CardDescription,
+   CardHeader,
+   CardTitle,
+ } from "@/components/ui/card";
+ 
+ interface DeviceOrientationEvent {
+   alpha: number | null;
+   beta: number | null;
+   gamma: number | null;
+   absolute: boolean;
+ }
+ 
+ type PermissionStatus = "granted" | "denied" | "prompt";
+ 
+ interface DeviceInfoProps {
+   orientation: DeviceOrientationEvent;
+   permissionStatus: PermissionStatus | null;
+ }
+ 
+ export const DeviceInfo: React.FC<DeviceInfoProps> = ({
+   orientation,
+   permissionStatus,
+ }) => {
+   return (
+     <Card>
+       <CardHeader>
+         <CardTitle>Device Information</CardTitle>
+         <CardDescription>Current device state and permissions</CardDescription>
+       </CardHeader>
+       <CardContent className="space-y-4">
+         <div className="space-y-2">
+           <div className="flex items-center justify-between">
+             <span className="font-medium">Absolute Orientation</span>
+             <span className="text-sm text-muted-foreground">
+               {orientation.absolute ? "Yes" : "No"}
+             </span>
+           </div>
+ 
+           {permissionStatus && (
+             <div className="flex items-center justify-between">
+               <span className="font-medium">Permission Status</span>
+               <span className="text-sm text-muted-foreground">
+                 {permissionStatus}
+               </span>
+             </div>
+           )}
+         </div>
+ 
+         <div className="pt-4">
+           <h3 className="font-semibold mb-2">Axis Information</h3>
+           <ul className="text-sm text-muted-foreground space-y-1">
+             <li>â¢ Alpha: Rotation around Z-axis (0Â° to 360Â°)</li>
+             <li>â¢ Beta: Rotation around X-axis (-180Â° to 180Â°)</li>
+             <li>â¢ Gamma: Rotation around Y-axis (-90Â° to 90Â°)</li>
+           </ul>
+         </div>
+       </CardContent>
+     </Card>
+   );
+ }; 
```

---

Now let's create the Documentation component:









---

```diff
- 
+ "use client";
+ import React from "react";
+ import {
+   Card,
+   CardContent,
+   CardDescription,
+   CardHeader,
+   CardTitle,
+ } from "@/components/ui/card";
+ 
+ export const Documentation = () => {
+   return (
+     <Card className="mt-8">
+       <CardHeader>
+         <CardTitle>Documentation</CardTitle>
+         <CardDescription>Understanding the Device Orientation API</CardDescription>
+       </CardHeader>
+       <CardContent className="space-y-6">
+         <div className="space-y-4">
+           <div>
+             <h3 className="font-semibold mb-2">
+               What is the Device Orientation API?
+             </h3>
+             <p className="text-sm text-muted-foreground">
+               The Device Orientation API provides access to the device's physical
+               orientation and motion data. It allows web applications to respond
+               to changes in device orientation and movement.
+             </p>
+           </div>
+ 
+           <div>
+             <h3 className="font-semibold mb-2">Key Features</h3>
+             <ul className="text-sm text-muted-foreground list-disc pl-4 space-y-1">
+               <li>Access device orientation angles (alpha, beta, gamma)</li>
+               <li>Support for absolute and relative orientation</li>
+               <li>Permission-based access control</li>
+               <li>Real-time orientation updates</li>
+               <li>Cross-browser compatibility</li>
+             </ul>
+           </div>
+ 
+           <div>
+             <h3 className="font-semibold mb-2">Browser Support</h3>
+             <p className="text-sm text-muted-foreground">
+               The Device Orientation API is supported in most modern browsers on
+               mobile devices. Some browsers may require HTTPS and explicit user
+               permission.
+             </p>
+           </div>
+ 
+           <div>
+             <h3 className="font-semibold mb-2">Best Practices</h3>
+             <ul className="text-sm text-muted-foreground list-disc pl-4 space-y-1">
+               <li>Always check for API support</li>
+               <li>Request permissions when needed</li>
+               <li>Handle null values gracefully</li>
+               <li>Clean up event listeners</li>
+               <li>Consider device compatibility</li>
+             </ul>
+           </div>
+ 
+           <div>
+             <h3 className="font-semibold mb-2">Example Use Cases</h3>
+             <ul className="text-sm text-muted-foreground list-disc pl-4 space-y-1">
+               <li>Virtual reality experiences</li>
+               <li>Interactive games</li>
+               <li>Augmented reality applications</li>
+               <li>Device motion tracking</li>
+               <li>Orientation-based UI adjustments</li>
+             </ul>
+           </div>
+         </div>
+       </CardContent>
+     </Card>
+   );
+ }; 
```

---

Finally, let's update the main page component to use our new components:









---

```diff
  "use client";
- import React, { useState, useEffect } from "react";
- import { Button } from "@/components/ui/button";
- import {
-   Card,
-   CardContent,
-   CardDescription,
-   CardFooter,
-   CardHeader,
-   CardTitle,
- } from "@/components/ui/card";
- import { Alert, AlertDescription, AlertTitle } from "@/components/ui/alert";
- import {
-   AlertCircle,
-   Smartphone,
-   Compass,
-   Gauge,
-   Lock,
-   Unlock,
- } from "lucide-react";
- import { Progress } from "@/components/ui/progress";
- 
- interface DeviceOrientationEvent {
-   alpha: number | null;
-   beta: number | null;
-   gamma: number | null;
-   absolute: boolean;
- }
- 
- type PermissionStatus = "granted" | "denied" | "prompt";
- 
- const DeviceOrientationPage = () => {
-   const [isSupported, setIsSupported] = useState(false);
-   const [isActive, setIsActive] = useState(false);
-   const [orientation, setOrientation] = useState<DeviceOrientationEvent>({
-     alpha: null,
-     beta: null,
-     gamma: null,
-     absolute: false,
-   });
-   const [permissionStatus, setPermissionStatus] =
-     useState<PermissionStatus | null>(null);
- 
-   useEffect(() => {
-     // Check if DeviceOrientationEvent is supported
-     if (typeof DeviceOrientationEvent !== "undefined") {
-       setIsSupported(true);
-     }
- 
-     // Request permission if needed
-     if (
-       typeof (DeviceOrientationEvent as any).requestPermission === "function"
-     ) {
-       checkPermission();
-     }
- 
-     return () => {
-       if (isActive) {
-         window.removeEventListener("deviceorientation", handleOrientation);
-       }
-     };
-   }, [isActive]);
- 
-   const checkPermission = async () => {
-     try {
-       const status = (await (
-         DeviceOrientationEvent as any
-       ).requestPermission()) as PermissionStatus;
-       setPermissionStatus(status);
-     } catch (error) {
-       console.error("Permission error:", error);
-     }
-   };
- 
-   const handleOrientation = (event: DeviceOrientationEvent) => {
-     setOrientation({
-       alpha: event.alpha,
-       beta: event.beta,
-       gamma: event.gamma,
-       absolute: event.absolute,
-     });
-   };
- 
-   const startTracking = () => {
-     window.addEventListener("deviceorientation", handleOrientation);
-     setIsActive(true);
-   };
- 
-   const stopTracking = () => {
-     window.removeEventListener("deviceorientation", handleOrientation);
-     setIsActive(false);
-   };
- 
-   const formatAngle = (angle: number | null) => {
-     if (angle === null) return "N/A";
-     return `${Math.round(angle)}Â°`;
-   };
- 
-   return (
-     <>
-       <div className="text-center space-y-2 mb-8">
-         <h1 className="text-2xl sm:text-3xl font-bold">
-           Device Orientation API
-         </h1>
-         <p className="text-sm sm:text-base text-muted-foreground">
-           Access device orientation and motion data
-         </p>
-       </div>
- 
-       {!isSupported && (
-         <Alert variant="destructive" className="mb-6">
-           <AlertCircle className="h-4 w-4" />
-           <AlertTitle>Not Supported</AlertTitle>
-           <AlertDescription>
-             The Device Orientation API is not supported in your browser or
-             device.
-           </AlertDescription>
-         </Alert>
-       )}
- 
-       <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
-         <Card>
-           <CardHeader>
-             <CardTitle>Orientation Data</CardTitle>
-             <CardDescription>
-               Real-time device orientation values
-             </CardDescription>
-           </CardHeader>
-           <CardContent className="space-y-4">
-             <div className="space-y-4">
-               <div className="flex items-center justify-between">
-                 <div className="flex items-center space-x-2">
-                   <Compass className="h-5 w-5" />
-                   <span className="font-medium">Alpha (Z-axis)</span>
-                 </div>
-                 <span className="font-mono">
-                   {formatAngle(orientation.alpha)}
-                 </span>
-               </div>
-               <Progress
-                 value={
-                   orientation.alpha
-                     ? ((orientation.alpha + 180) / 360) * 100
-                     : 0
-                 }
-                 className="h-2"
-               />
- 
-               <div className="flex items-center justify-between">
-                 <div className="flex items-center space-x-2">
-                   <Smartphone className="h-5 w-5" />
-                   <span className="font-medium">Beta (X-axis)</span>
-                 </div>
-                 <span className="font-mono">
-                   {formatAngle(orientation.beta)}
-                 </span>
-               </div>
-               <Progress
-                 value={
-                   orientation.beta ? ((orientation.beta + 90) / 180) * 100 : 0
-                 }
-                 className="h-2"
-               />
- 
-               <div className="flex items-center justify-between">
-                 <div className="flex items-center space-x-2">
-                   <Gauge className="h-5 w-5" />
-                   <span className="font-medium">Gamma (Y-axis)</span>
-                 </div>
-                 <span className="font-mono">
-                   {formatAngle(orientation.gamma)}
-                 </span>
-               </div>
-               <Progress
-                 value={
-                   orientation.gamma ? ((orientation.gamma + 90) / 180) * 100 : 0
-                 }
-                 className="h-2"
-               />
-             </div>
-           </CardContent>
-           <CardFooter className="flex justify-between">
-             <Button
-               onClick={isActive ? stopTracking : startTracking}
-               disabled={!isSupported}
-               className="w-full"
-             >
-               {isActive ? (
-                 <>
-                   <Lock className="mr-2 h-4 w-4" />
-                   Stop Tracking
-                 </>
-               ) : (
-                 <>
-                   <Unlock className="mr-2 h-4 w-4" />
-                   Start Tracking
-                 </>
-               )}
-             </Button>
-           </CardFooter>
-         </Card>
- 
-         <Card>
-           <CardHeader>
-             <CardTitle>Device Information</CardTitle>
-             <CardDescription>
-               Current device state and permissions
-             </CardDescription>
-           </CardHeader>
-           <CardContent className="space-y-4">
-             <div className="space-y-2">
-               <div className="flex items-center justify-between">
-                 <span className="font-medium">Absolute Orientation</span>
-                 <span className="text-sm text-muted-foreground">
-                   {orientation.absolute ? "Yes" : "No"}
-                 </span>
-               </div>
- 
-               {permissionStatus && (
-                 <div className="flex items-center justify-between">
-                   <span className="font-medium">Permission Status</span>
-                   <span className="text-sm text-muted-foreground">
-                     {permissionStatus}
-                   </span>
-                 </div>
-               )}
-             </div>
- 
-             <div className="pt-4">
-               <h3 className="font-semibold mb-2">Axis Information</h3>
-               <ul className="text-sm text-muted-foreground space-y-1">
-                 <li>â¢ Alpha: Rotation around Z-axis (0Â° to 360Â°)</li>
-                 <li>â¢ Beta: Rotation around X-axis (-180Â° to 180Â°)</li>
-                 <li>â¢ Gamma: Rotation around Y-axis (-90Â° to 90Â°)</li>
-               </ul>
-             </div>
-           </CardContent>
-         </Card>
-       </div>
- 
-       <Card className="mt-8">
-         <CardHeader>
-           <CardTitle>Documentation</CardTitle>
-           <CardDescription>
-             Understanding the Device Orientation API
-           </CardDescription>
-         </CardHeader>
-         <CardContent className="space-y-6">
-           <div className="space-y-4">
-             <div>
-               <h3 className="font-semibold mb-2">
-                 What is the Device Orientation API?
-               </h3>
-               <p className="text-sm text-muted-foreground">
-                 The Device Orientation API provides access to the device's
-                 physical orientation and motion data. It allows web applications
-                 to respond to changes in device orientation and movement.
-               </p>
-             </div>
- 
-             <div>
-               <h3 className="font-semibold mb-2">Key Features</h3>
-               <ul className="text-sm text-muted-foreground list-disc pl-4 space-y-1">
-                 <li>Access device orientation angles (alpha, beta, gamma)</li>
-                 <li>Support for absolute and relative orientation</li>
-                 <li>Permission-based access control</li>
-                 <li>Real-time orientation updates</li>
-                 <li>Cross-browser compatibility</li>
-               </ul>
-             </div>
- 
-             <div>
-               <h3 className="font-semibold mb-2">Browser Support</h3>
-               <p className="text-sm text-muted-foreground">
-                 The Device Orientation API is supported in most modern browsers
-                 on mobile devices. Some browsers may require HTTPS and explicit
-                 user permission.
-               </p>
-             </div>
- 
-             <div>
-               <h3 className="font-semibold mb-2">Best Practices</h3>
-               <ul className="text-sm text-muted-foreground list-disc pl-4 space-y-1">
-                 <li>Always check for API support</li>
-                 <li>Request permissions when needed</li>
-                 <li>Handle null values gracefully</li>
-                 <li>Clean up event listeners</li>
-                 <li>Consider device compatibility</li>
-               </ul>
-             </div>
- 
-             <div>
-               <h3 className="font-semibold mb-2">Example Use Cases</h3>
-               <ul className="text-sm text-muted-foreground list-disc pl-4 space-y-1">
-                 <li>Virtual reality experiences</li>
-                 <li>Interactive games</li>
-                 <li>Augmented reality applications</li>
-                 <li>Device motion tracking</li>
-                 <li>Orientation-based UI adjustments</li>
-               </ul>
-             </div>
-           </div>
-         </CardContent>
-       </Card>
-     </>
-   );
- };
- 
- export default DeviceOrientationPage;
+ import { OrientationTracker } from "./components/OrientationTracker";
+ 
+ export default function DeviceOrientationPage() {
+   return <OrientationTracker />;
+ }
  
```

---

I've successfully refactored the code by:

1. Creating a new `components` directory in the `device-orientation` feature folder
2. Splitting the code into four main components:
   - `OrientationTracker.tsx`: Main component that manages state and logic
   - `OrientationData.tsx`: Displays orientation data and tracking controls
   - `DeviceInfo.tsx`: Shows device information and permissions
   - `Documentation.tsx`: Contains the documentation section
3. Updated the main page component to use the new `OrientationTracker` component

The code is now more modular, easier to maintain, and follows better separation of concerns. Each component has its own specific responsibility:

- `OrientationTracker`: Manages the state and logic for device orientation tracking
- `OrientationData`: Handles the display of orientation values and tracking controls
- `DeviceInfo`: Shows device-specific information and permissions
- `Documentation`: Displays the API documentation and best practices

The functionality remains exactly the same, but the code is now better organized and more maintainable. Each component is properly typed with TypeScript interfaces and follows React best practices.

Would you like me to make any adjustments to the refactored code?

---

_**User**_

only export the client side logic no need to export cards such as documentation info

---

_**Assistant**_

I'll help you refactor the code to only export the client-side logic, keeping the UI components in the main page. Let's reorganize the code:

1. First, let's create a new file for the client-side logic:




---

```diff
- 
+ "use client";
+ import { useState, useEffect } from "react";
+ 
+ interface DeviceOrientationEvent {
+   alpha: number | null;
+   beta: number | null;
+   gamma: number | null;
+   absolute: boolean;
+ }
+ 
+ type PermissionStatus = "granted" | "denied" | "prompt";
+ 
+ interface UseDeviceOrientationReturn {
+   isSupported: boolean;
+   isActive: boolean;
+   orientation: DeviceOrientationEvent;
+   permissionStatus: PermissionStatus | null;
+   startTracking: () => void;
+   stopTracking: () => void;
+ }
+ 
+ export const useDeviceOrientation = (): UseDeviceOrientationReturn => {
+   const [isSupported, setIsSupported] = useState(false);
+   const [isActive, setIsActive] = useState(false);
+   const [orientation, setOrientation] = useState<DeviceOrientationEvent>({
+     alpha: null,
+     beta: null,
+     gamma: null,
+     absolute: false,
+   });
+   const [permissionStatus, setPermissionStatus] =
+     useState<PermissionStatus | null>(null);
+ 
+   useEffect(() => {
+     if (typeof DeviceOrientationEvent !== "undefined") {
+       setIsSupported(true);
+     }
+ 
+     if (
+       typeof (DeviceOrientationEvent as any).requestPermission === "function"
+     ) {
+       checkPermission();
+     }
+ 
+     return () => {
+       if (isActive) {
+         window.removeEventListener("deviceorientation", handleOrientation);
+       }
+     };
+   }, [isActive]);
+ 
+   const checkPermission = async () => {
+     try {
+       const status = (await (
+         DeviceOrientationEvent as any
+       ).requestPermission()) as PermissionStatus;
+       setPermissionStatus(status);
+     } catch (error) {
+       console.error("Permission error:", error);
+     }
+   };
+ 
+   const handleOrientation = (event: DeviceOrientationEvent) => {
+     setOrientation({
+       alpha: event.alpha,
+       beta: event.beta,
+       gamma: event.gamma,
+       absolute: event.absolute,
+     });
+   };
+ 
+   const startTracking = () => {
+     window.addEventListener("deviceorientation", handleOrientation);
+     setIsActive(true);
+   };
+ 
+   const stopTracking = () => {
+     window.removeEventListener("deviceorientation", handleOrientation);
+     setIsActive(false);
+   };
+ 
+   return {
+     isSupported,
+     isActive,
+     orientation,
+     permissionStatus,
+     startTracking,
+     stopTracking,
+   };
+ }; 
```

---

Now, let's update the main page component to use our new hook and keep all the UI components in one place:









---

Cancelled

---



---

